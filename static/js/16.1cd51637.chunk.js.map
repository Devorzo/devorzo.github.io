{"version":3,"sources":["pages/search.js"],"names":["cancel","CancelToken","Axios","Search","props","useState","query","setQuery","useEffect","q","data","location","search","replace","split","forEach","item","i","join","trim","post","getApiLink","cancelToken","c","then","response","console","log","catch","thrown","isCancel","message","className"],"mappings":"kIAOIA,E,wDADIC,EAAgBC,IAAhBD,YAgEOE,UA7DA,SAACC,GAAW,IAAD,EACEC,mBAAS,IADX,mBACjBC,EADiB,KACVC,EADU,KAwCxB,OAtCAC,qBAAU,WACR,IAAIC,EAAIL,EAAMM,KAAKC,SAASC,OAAOC,QAAQ,IAAK,KAChDJ,EAAIA,EAAEK,MAAM,MACVC,SAAQ,SAACC,GACT,IAAMC,EAAID,EAAKF,MAAM,KACR,MAATG,EAAE,IACJV,EAASU,EAAE,GAAGH,MAAM,OAAOI,KAAK,WAGnC,CAACd,EAAMM,OAEVF,qBAAU,WAsBR,MArBmB,KAAfF,EAAMa,MACRjB,IAAMkB,KAAN,UACKC,cADL,kBAEE,CAAEf,SACF,CACEgB,YAAa,IAAIrB,GAAY,SAAkBsB,GAC7CvB,EAASuB,OAIZC,MAAK,SAACC,GACLC,QAAQC,IAAI,CAAEF,gBAEfG,OAAM,SAACC,GACF3B,IAAM4B,SAASD,GACjBH,QAAQC,IAAI,qBAAsBE,EAAOE,SAGzCL,QAAQC,IAAIE,EAAOE,YAGpB,WACL/B,EAAO,uBAER,CAACM,IAGF,oCACE,yBAAK0B,UAAU,aACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,aACf,yBAAKA,UAAU,YACK,KAAjB1B,EAAMa,QACL,yBAAKa,UAAU,+BACb,wBAAIA,UAAU,gBAAd,iEAKH1B","file":"static/js/16.1cd51637.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport Axios from 'axios';\nimport Breakpoint from '../components/breakpoint/breakpoint';\nimport { getApiLink } from '../lib/env.lib';\n\nconst { CancelToken } = Axios;\nlet cancel;\n\nconst Search = (props) => {\n  const [query, setQuery] = useState('');\n  useEffect(() => {\n    let q = props.data.location.search.replace('?', '');\n    q = q.split('&');\n    q.forEach((item) => {\n      const i = item.split('=');\n      if (i[0] === 'q') {\n        setQuery(i[1].split('%20').join(' '));\n      }\n    });\n  }, [props.data]);\n\n  useEffect(() => {\n    if (query.trim !== '')\n      Axios.post(\n        `${getApiLink()}/api/v1/search`,\n        { query },\n        {\n          cancelToken: new CancelToken(function executor(c) {\n            cancel = c;\n          }),\n        },\n      )\n        .then((response) => {\n          console.log({ response });\n        })\n        .catch((thrown) => {\n          if (Axios.isCancel(thrown)) {\n            console.log('Request canceled: ', thrown.message);\n          } else {\n            // handle error\n            console.log(thrown.message);\n          }\n        });\n    return () => {\n      cancel('search cancelled');\n    };\n  }, [query]);\n\n  return (\n    <>\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-lg-2\" />\n          <div className=\"col-lg-8\">\n            {query.trim() === '' && (\n              <div className=\"text-center w-100 mt-5 pt-5\">\n                <h5 className=\"search-metro\">\n                  Start typing to search articles, users, blogs and moreâ€¦\n                </h5>\n              </div>\n            )}\n            {query}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Search;\n"],"sourceRoot":""}