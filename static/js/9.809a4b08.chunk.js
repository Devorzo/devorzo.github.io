(this.webpackJsonpmajor_project_ui=this.webpackJsonpmajor_project_ui||[]).push([[9],{192:function(e,t,a){"use strict";var n=a(58),r=a.n(n),l=a(70),c=a(6),o=a(0),s=a.n(o),i=a(193),m=a.n(i),u=a(29),d=a.n(u),h=a(24),b=a(60),f=a(59),g=a(179),p=a(237),E=a(30),v=a(194),w=a.n(v),y=a(195),j=a.n(y),O=a(191),k=a.n(O),x=a(196),N=a.n(x),_=a(197),C=a.n(_),A=a(198),S=a.n(A),F=a(199),D=a.n(F),B=a(200),R=a.n(B),T=a(201),I=a.n(T),L=a(202),P=a.n(L),z=a(203),J=a.n(z),M=a(204),H=a.n(M),U=a(205),W=a.n(U),q=a(206),$=a.n(q),G=a(207),K=a.n(G),Q={embed:{class:w.a,inlineToolbar:!0,config:{services:{youtube:!0,coub:!0,imgur:!0,twitch:!0,gfycat:!0,yandex:!0,codepen:!0,vimeo:!0,twitter:{regex:/^https?:\/\/twitter\.com\/(?:#!\/)?(\w+)\/status(?:es)?\/(\d+)(?:\/.*)?$/,embedUrl:"https://twitframe.com/show?url=https://twitter.com/<%= remote_id %>",html:'<iframe width="100%" height="600" style="margin: 0 auto;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:600,width:600,id:function(e){return e.join("/status/")}},instagram:{regex:/(https?:\/\/(?:www\.)?instagram\.com\/p\/([^/?#&]+)).*/,embedUrl:"<%= remote_id %>",html:'<div style="width: 100%; height: 100px; background-color: #DB2E6E; text-align: center; color: #ffffff; padding-top: 40px">Instagram embedded.</div>',height:300,width:600}}}},table:{class:j.a,inlineToolbar:!0,config:{rows:2,cols:3}},paragraph:{class:k.a,inlineToolbar:!0},list:{class:N.a,inlineToolbar:!0},warning:{class:C.a,inlineToolbar:!0,shortcut:"CMD+SHIFT+W",config:{titlePlaceholder:"Title",messagePlaceholder:"Message"}},code:S.a,linkTool:{class:D.a,config:{endpoint:"".concat(Object(E.a)(),"/linkToolUrl")}},image:{class:R.a,config:{uploader:{uploadByFile:function(e){var t=new FormData;return t.append("file",e),d.a.post("".concat(Object(E.a)(),"/api/v1/upload"),t,{}).then((function(e){return console.log(e),e.data.success?{success:1,file:{url:"".concat(Object(E.a)(),"/file/").concat(e.data.file_name)}}:{success:0}})).catch((function(e){return console.log(e),console.log("Error while uploading image"),{success:0}}))}}}},header:I.a,quote:P.a,marker:J.a,checklist:H.a,delimiter:W.a,inlineCode:$.a,simpleImage:K.a},V=a(9),X=function(){return"https://picsum.photos/id/".concat((e=0,t=1084,Math.round(Math.random()*(+t-+e)+ +e)),"/1200/400.jpg");var e,t};t.a=function(e){var t=Object(o.useRef)(null),a=Object(o.useContext)(h.a),n=a.user_id,i=a.user_dp,u=a.user_fullname,v=a.user_username,w=Object(o.useState)(!1),y=Object(c.a)(w,2),j=y[0],O=y[1],k=Object(o.useState)(null),x=Object(c.a)(k,2),N=x[0],_=x[1],C=Object(o.useState)(null),A=Object(c.a)(C,2),S=A[0],F=A[1],D=Object(o.useState)(""),B=Object(c.a)(D,2),R=B[0],T=B[1],I=Object(o.useState)(""),L=Object(c.a)(I,2),P=L[0],z=L[1],J=Object(o.useState)(""),M=Object(c.a)(J,2),H=M[0],U=M[1],W=Object(o.useState)(s.a.createElement(s.a.Fragment,null)),q=Object(c.a)(W,2),$=q[0],G=q[1],K=Object(o.useState)(!1),Y=Object(c.a)(K,2),Z=Y[0],ee=Y[1],te=Object(o.useState)(""),ae=Object(c.a)(te,2),ne=ae[0],re=ae[1],le=Object(o.useState)("NA"),ce=Object(c.a)(le,2),oe=ce[0],se=ce[1],ie=Object(o.useState)([]),me=Object(c.a)(ie,2),ue=me[0],de=me[1],he=Object(o.useState)(),be=Object(c.a)(he,2),fe=be[0],ge=be[1];function pe(){O(!1)}function Ee(){return ve.apply(this,arguments)}function ve(){return(ve=Object(l.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.current.save();case 2:(a=e.sent).blocks.length>0?(z(a.blocks[0].data.text),a.blocks.length>1&&U(a.blocks[1].data.text)):z("No title"),_(a),console.log("savedData",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){se("NA"===oe?X():"NA")}return Object(o.useEffect)((function(){"edit"===e.mode?(F("Save"),T("updateArticleById"),e.articleData?_(JSON.parse(e.articleData.content)):_({time:Date.now(),blocks:[],version:"2.17.0"})):(F("Publish"),T("createArticle"),_({time:Date.now(),blocks:[],version:"2.17.0"}),se("NA"))}),[]),Object(o.useEffect)((function(){if(e.articleData&&(ee(!0),re(e.articleData.article_id),_(JSON.parse(e.articleData.content)),se(e.articleData.article_banner),e.articleData.tags)){var t=e.articleData.tags.map((function(e){return e.tag}));de(t)}}),[e.articleData]),s.a.createElement(s.a.Fragment,null,$,s.a.createElement("div",{className:"w-100 text-center",style:{}},"NA"!==oe?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"w-100 show-xs show-sm hide-md"},s.a.createElement("div",{className:" text-center mb-2",style:{height:"40vw",width:"100%",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",marginTop:"15px",borderBottomRightRadius:"18px",borderBottomLeftRadius:"18px"}},s.a.createElement("div",{className:"preload w-100 h-100"},s.a.createElement("img",{src:oe,alt:"\xa0",style:{height:"100%",width:"auto",borderBottomRightRadius:"18px",borderBottomLeftRadius:"18px"}}))))):s.a.createElement(s.a.Fragment,null)),s.a.createElement("br",null),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-2"},s.a.createElement("button",{className:"btn btn-primary mt-3",onClick:function(){N.blocks.length>0?"paragraph"===N.blocks[0].type||"header"===N.blocks[0].type?O(!0):e.notyf.error("Invalid article title"):e.notyf.error("Invalid article")}},S),s.a.createElement(g.a,{show:j,onHide:pe,size:"lg"},s.a.createElement(g.a.Header,{closeButton:!0},s.a.createElement(g.a.Title,null,S," Article")),s.a.createElement(g.a.Body,null,s.a.createElement("h5",null,"Article Card Preview"),s.a.createElement(b.a,{className:"mb-4",type:1,data:{article_id:"test-article",title:P,time:Date.now(),content:H,bannerLink:oe,tags:ue,user:{user_id:n,imageLink:i,name:u,username:v}}}),s.a.createElement("hr",{className:"light"}),s.a.createElement("h5",null,"Add tags"),s.a.createElement("input",{type:"text",placeholder:"enter tags",className:"form-control",value:fe,onChange:function(t){var a=t.target.value;if(" "===a[a.length-1]){if(ue.length<5)if(a.trim().length>=3&&a.trim().length<=20){var n=ue;-1===n.indexOf(a.trim().toLowerCase())?de(n.concat(a.trim().toLowerCase())):e.notyf.open({type:"warn",message:"The tag has already been added."})}else e.notyf.error("Invalid tag");else e.notyf.error("Only upto 5 tags are allowed on a single article.");ge("")}else ge(a)}}),s.a.createElement("div",{className:"text-muted",style:{fontSize:"12px"}},"Press space to add tags"),s.a.createElement("br",null),s.a.createElement("div",{className:"tags"},ue.map((function(t){var a=Object(f.a)(t),n=Object(f.b)(a,!0);return console.log({h:a,inv:n}),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"tag d-inline-block noselect",style:{backgroundColor:"#"+a,color:n,cursor:"pointer"},onClick:function(){return function(t){var a=ue.indexOf(t);if(-1!==a){var n=ue;n.splice(a,1),de(n),Ee()}else e.notyf.error("Tag not found")}(t)}},"#",t))})),function(){if(ue.length>0)return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"text-muted",style:{fontSize:"12px"}},"Click on the tags to remove them"))}()),s.a.createElement("hr",{className:"light"}),"Would you like to ",S," this article.",s.a.createElement("br",null)),s.a.createElement(g.a.Footer,null,s.a.createElement(p.a,{variant:"secondary",onClick:pe},"Close"),s.a.createElement(p.a,{variant:"primary",onClick:function(){if(Ee(),N.blocks.length>0)if("paragraph"===N.blocks[0].type||"header"===N.blocks[0].type){var t={};"edit"===e.mode?t.article_id=ne:e.mode,"NA"!==oe&&(t.article_banner=oe),t.xAuthToken=e.auth_token,t.title=N.blocks[0].data.text,t.content=JSON.stringify(N),t.preview=N.blocks.length>=2?N.blocks[1].data.text:N.blocks[0].data.text,t.tags=ue,console.log({_data_editor:t}),d.a.post("".concat(Object(E.a)(),"/api/v1/").concat(R),t).then((function(t){console.log(t),t.data.success&&("edit"===e.mode?e.notyf.success("Saved article"):e.notyf.success("Published article"),G(s.a.createElement(s.a.Fragment,null,s.a.createElement(V.a,{to:"/read/".concat(t.data.message.data.article_id)}))))})).catch((function(t){t?(console.log({resp:t.response.data}),null!==t.response.data.error.message?e.notyf.error(""+t.response.data.error.message):e.notyf.error("Error occured")):e.notyf.error("Error occured")}))}else e.notyf.error("Invalid article title");else e.notyf.error("Invalid article")}},S))),s.a.createElement("button",{className:"btn btn-outline-secondary btn-sm mt-1 show-xs show-sm hide-md",onClick:we},"NA"===oe?"Add Banner":"Remove Banner"),function(){if("NA"!==oe)return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:"btn btn-sm btn-info show-xs show-sm hide-md",onClick:function(){se(X())}},"Randomize"))}()),s.a.createElement("div",{className:"col-md-8"},s.a.createElement("div",{className:"w-100"},"NA"!==oe?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"text-center mb-2 hide-xs hide-sm show-md show-lg show-xl"},s.a.createElement("img",{src:oe,alt:"\xa0",className:"preload",style:{height:"20vw",width:"100%",borderBottomRightRadius:"18px",borderBottomLeftRadius:"18px"}}))):s.a.createElement(s.a.Fragment,null)),function(){if("edit"===e.mode&&Z||"new"===e.mode)return s.a.createElement(s.a.Fragment,null,"NA"==oe||""==oe?s.a.createElement("br",null):s.a.createElement(s.a.Fragment,null),s.a.createElement(m.a,{placeholder:"Write an awesome...",instanceRef:function(e){return t.current=e},onChange:Ee,tools:Q,data:N}))}()),s.a.createElement("div",{className:"col-md-2"},s.a.createElement("button",{className:"btn btn-outline-secondary btn-sm mt-3 hide-xs hide-sm show-md",onClick:we},"NA"===oe?"Add Banner":"Remove Banner"),function(){if("NA"!==oe)return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{className:"btn btn-sm btn-info hide-xs hide-sm show-md mt-2",onClick:function(){se(X())}},"Randomize"))}()))))}},236:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(192),c=a(24),o=a(57);t.default=function(e){console.log(e);var t=Object(n.useContext)(c.a),a=t.user_id,s=t.auth_token;return Object(n.useEffect)((function(){document.title="Create new article - Lattice"}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{user_id:a,auth_token:s,mode:"new",notyf:o.a}))}}}]);
//# sourceMappingURL=9.809a4b08.chunk.js.map