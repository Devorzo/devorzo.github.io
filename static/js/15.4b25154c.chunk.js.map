{"version":3,"sources":["pages/register.js"],"names":["Register","props","useContext","AuthContext","isLoggedIn","setAuth","useState","name","setName","username","setUsername","email","setEmail","password","setPassword","confpassword","setConfpass","agreed","setAgreed","handleChange","e","n","target","v","value","className","style","backgroundColor","color","type","onChange","placeholder","id","aria-describedby","required","checked","htmlFor","to","onClick","preventDefault","console","log","data","fullname","test","validateEmail","length","notyf","error","Axios","post","getApiLink","then","response","authToken","success","message","token","xAuthToken","catch","err"],"mappings":"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","file":"static/js/15.4b25154c.chunk.js","sourcesContent":["/* eslint-disable jsx-a11y/label-has-for */\r\n/* eslint-disable no-useless-escape */\r\nimport React, { useState, useContext } from 'react';\r\n// import img1 from \"../images/i2.png\"\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\nimport Axios from 'axios';\r\nimport { AuthContext } from '../contexts/auth_context';\r\nimport notyf from '../lib/notification';\r\n\r\nimport { getApiLink } from '../lib/env.lib';\r\n\r\nconst validateEmail = (email) => {\r\n  const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n  return re.test(email);\r\n};\r\n\r\nconst Register = (props) => {\r\n  const { isLoggedIn, setAuth } = useContext(AuthContext);\r\n\r\n  // const [inviteMode, setInviteMode] = useState(2);\r\n  // const [inviteCode, setInviteCode] = useState('');\r\n  const [name, setName] = useState('');\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [confpassword, setConfpass] = useState('');\r\n  const [agreed, setAgreed] = useState(false);\r\n\r\n  function handleChange(e) {\r\n    // console.log(e.target.name, e.target.value)\r\n    const n = e.target.name;\r\n    const v = e.target.value;\r\n    // if (n === 'invite') {\r\n    //   setInviteCode(v);\r\n    // } else\r\n    if (n === 'fullname') {\r\n      setName(v);\r\n    } else if (n === 'username') {\r\n      setUsername(v);\r\n    } else if (n === 'email') {\r\n      setEmail(v);\r\n    } else if (n === 'password') {\r\n      setPassword(v);\r\n    } else if (n === 'confpassword') {\r\n      setConfpass(v);\r\n    }\r\n  }\r\n\r\n  function requestVerificationEmail(authToken) {\r\n    Axios.post(`${getApiLink()}/api/v1/sendVerificationEmail`, {\r\n      xAuthToken: authToken,\r\n      email,\r\n    });\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    console.log({\r\n      // inviteCode,\r\n      name,\r\n      username,\r\n      email,\r\n      password,\r\n      confpassword,\r\n    });\r\n\r\n    const data = {\r\n      // inviteCode: inviteCode,\r\n      username,\r\n      fullname: name,\r\n      email,\r\n      password,\r\n      confpassword,\r\n    };\r\n\r\n    // if (inviteCode === \"\") {\r\n    //     notyf.error(\"Invalid inviteCode\")\r\n    //     return\r\n    // }\r\n\r\n    if (name === '') {\r\n      notyf.error('Invalid name');\r\n      return;\r\n    }\r\n\r\n    if (username === '') {\r\n      notyf.error('Invalid username');\r\n      return;\r\n    }\r\n\r\n    if (email === '' || !validateEmail(email)) {\r\n      notyf.error('Invalid email');\r\n      return;\r\n    }\r\n\r\n    if (password === '' || password.length < 6) {\r\n      notyf.error('Invalid password');\r\n      return;\r\n    }\r\n    if (confpassword === '' || confpassword.length < 6) {\r\n      notyf.error('Invalid confirmation password');\r\n      return;\r\n    }\r\n\r\n    if (password !== confpassword) {\r\n      notyf.error('Passwords do not match');\r\n      return;\r\n    }\r\n\r\n    if (!agreed) {\r\n      notyf.error(\r\n        'Please agree to the Code of conduct, privacy policy and terms of this site',\r\n      );\r\n      return;\r\n    }\r\n\r\n    Axios.post(`${getApiLink()}/register`, data)\r\n      .then((response) => {\r\n        // console.log(getApiLink())\r\n        // console.log(response)\r\n        // alert(response)\r\n        notyf.success('Registered successfully');\r\n\r\n        if (response.data.success) {\r\n          setAuth(response.data);\r\n          requestVerificationEmail(response.data.message.data.token);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        // alert(e)\r\n        console.log(e.response);\r\n        if (err.response.data.error.message !== null) {\r\n          notyf.error(`${err.response.data.error.message}`);\r\n        } else {\r\n          notyf.error('Error');\r\n        }\r\n        // notyf.error(\"\" + e.response.data.error.message)\r\n      });\r\n    // alert(name + \" \" + username + \" \" + email + \" \" + password + \" \" + confpassword)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"container\">\r\n        <div className=\"row justify-content-center\">\r\n          <div className=\"col-md-9 col-lg-12 col-xl-10\">\r\n            <div\r\n              className=\"card shadow-lgx o-hidden border-0 my-5x\"\r\n              style={{ backgroundColor: 'inherit', color: 'inherit' }}\r\n            >\r\n              <div className=\"card-body p-0\">\r\n                <div className=\"row\">\r\n                  {/* <div className=\"col-lg-6 d-none d-lg-flex\" style={{ backgroundColor: \"inherit\", color: \"inherit\" }}>\r\n                                                <img alt=\"img\" src={img1}\r\n                                                    style={{ height: \"400px\", marginTop: \"87px\", paddingTop: \"1px\", }} />\r\n                                            </div> */}\r\n                  <div className=\"col-lg-3\" />\r\n                  <div className=\"col-lg-6\">\r\n                    <div className=\"custom-card2 mt-4 p-2\">\r\n                      <div className=\"pt-4 p-md-5 pl-sm-0 pr-sm-0 pt-sm-5\">\r\n                        <div className=\"text-center\">\r\n                          <h4 className=\"mb-4\" style={{ color: 'inherit' }}>\r\n                            Create an account\r\n                          </h4>\r\n                        </div>\r\n                        <form className=\"user\">\r\n                          <div className=\"form-group\">\r\n                            {/* <div className=\"col-sm-6 mb-3 mb-sm-0\"><input className=\"form-control form-control-user\" type=\"text\" id=\"exampleFirstName\" placeholder=\"First Name\" name=\"first_name\" required /></div>\r\n                                                    <div className=\"col-sm-6\"><input className=\"form-control form-control-user\" type=\"text\" id=\"exampleFirstName\" placeholder=\"Last Name\" name=\"last_name\" required /></div> */}\r\n\r\n                            <input\r\n                              type=\"text\"\r\n                              name=\"fullname\"\r\n                              className=\"form-control form-control-user\"\r\n                              onChange={handleChange}\r\n                              placeholder=\"What would you like us to call you?\"\r\n                            />\r\n                          </div>\r\n\r\n                          <div className=\"form-group\">\r\n                            <input\r\n                              className=\"form-control form-control-user\"\r\n                              name=\"username\"\r\n                              onChange={handleChange}\r\n                              type=\"text\"\r\n                              id=\"exampleUsernameEmail\"\r\n                              aria-describedby=\"username\"\r\n                              placeholder=\"Enter Username...\"\r\n                              required\r\n                            />\r\n                          </div>\r\n\r\n                          <div className=\"form-group\">\r\n                            <input\r\n                              className=\"form-control form-control-user\"\r\n                              onChange={handleChange}\r\n                              type=\"email\"\r\n                              id=\"exampleInputEmail\"\r\n                              aria-describedby=\"emailHelp\"\r\n                              placeholder=\"Enter Email Address...\"\r\n                              name=\"email\"\r\n                              style={{}}\r\n                              required\r\n                            />\r\n                          </div>\r\n\r\n                          {/* <div className=\"form-group\">\r\n                                                    <input className=\"form-control form-control-user\"\r\n                                                        type=\"password\" id=\"exampleInputPassword\" placeholder=\"Password\"\r\n                                                        name=\"password\" style={{}} />\r\n                                                </div> */}\r\n\r\n                          <div className=\"form-group row\">\r\n                            <div className=\"col-sm-6 mb-3 mb-sm-0\">\r\n                              <input\r\n                                className=\"form-control form-control-user\"\r\n                                type=\"password\"\r\n                                onChange={handleChange}\r\n                                id=\"examplePasswordInput\"\r\n                                placeholder=\"Password\"\r\n                                name=\"password\"\r\n                              />\r\n                            </div>\r\n                            <div className=\"col-sm-6\">\r\n                              <input\r\n                                className=\"form-control form-control-user\"\r\n                                type=\"password\"\r\n                                onChange={handleChange}\r\n                                id=\"exampleRepeatPasswordInput\"\r\n                                placeholder=\"Repeat Password\"\r\n                                name=\"confpassword\"\r\n                              />\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"form-group\">\r\n                            <div className=\"pl-2 custom-checkbox small\">\r\n                              <div className=\"form-check\">\r\n                                <input\r\n                                  className=\"form-check-input custom-control-input\"\r\n                                  type=\"checkbox\"\r\n                                  id=\"formCheck-1\"\r\n                                  onChange={(e) => {\r\n                                    setAgreed(e.target.checked);\r\n                                  }}\r\n                                  checked={agreed}\r\n                                />\r\n                                <label\r\n                                  className=\"form-check-label custom-control-label\"\r\n                                  htmlFor=\"formCheck-1\"\r\n                                  style={{}}\r\n                                >\r\n                                  I agree to{' '}\r\n                                  <Link to=\"/code-of-conduct\">\r\n                                    Code of conduct\r\n                                  </Link>\r\n                                  , <Link to=\"/privacy\">privacy policy</Link>{' '}\r\n                                  and <Link to=\"/terms\">terms</Link> of this\r\n                                  site.\r\n                                </label>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <button\r\n                            className=\"btn btn-primary btn-block text-white btn-user\"\r\n                            type=\"submit\"\r\n                            onClick={handleSubmit}\r\n                            style={{}}\r\n                          >\r\n                            Register\r\n                          </button>\r\n\r\n                          {/* <hr /> */}\r\n\r\n                          {/* <a className=\"btn btn-primary btn-block text-white btn-google btn-user\"\r\n                                                    role=\"button\" style={{}} href=\"#btn\">\r\n                                                    <i\r\n                                                        className=\"fab fa-google\"></i>&nbsp; Login with Google</a><a href=\"#btn\"\r\n                                                            className=\"btn btn-primary btn-block text-white btn-facebook btn-user\"\r\n                                                            role=\"button\" style={{}}><i\r\n                                                                className=\"fab fa-facebook-f\"></i>&nbsp; Login with Facebook</a> */}\r\n                          {/* <hr /> */}\r\n                        </form>\r\n                        {/* <div className=\"text-center\"><a className=\"small\" href=\"forgot-password.html\"\r\n                                                style={{}}>Forgot Password?</a></div> */}\r\n                        <div className=\"text-center mt-5\">\r\n                          <Link\r\n                            className=\"small\"\r\n                            to=\"/login\"\r\n                            style={{ color: 'inherit' }}\r\n                          >\r\n                            Already have an account? Login!\r\n                          </Link>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {isLoggedIn && <Redirect to=\"/\" />}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n"],"sourceRoot":""}