(this.webpackJsonpmajor_project_ui=this.webpackJsonpmajor_project_ui||[]).push([[9],{192:function(e,t,a){"use strict";var n=a(61),r=a.n(n),c=a(71),l=a(6),o=a(0),i=a.n(o),s=a(194),u=a(29),m=a.n(u),d=a(179),b=a(236),g=a(9),f=a(24),p=a(60),h=a(195),v=a.n(h),E=a(196),y=a.n(E),j=a(191),w=a.n(j),O=a(197),x=a.n(O),k=a(198),N=a.n(k),S=a(199),_=a.n(S),C=a(200),D=a.n(C),A=a(201),F=a.n(A),T=a(202),I=a.n(T),B=a(203),R=a.n(B),W=a(204),J=a.n(W),P=a(205),z=a.n(P),L=a(206),M=a.n(L),H=a(207),U=a.n(H),q=a(208),$=a.n(q),G=a(30),K={embed:{class:v.a,inlineToolbar:!0,config:{services:{youtube:!0,coub:!0,imgur:!0,twitch:!0,gfycat:!0,yandex:!0,codepen:!0,vimeo:!0,twitter:{regex:/^https?:\/\/twitter\.com\/(?:#!\/)?(\w+)\/status(?:es)?\/(\d+)(?:\/.*)?$/,embedUrl:"https://twitframe.com/show?url=https://twitter.com/<%= remote_id %>",html:'<iframe width="100%" height="600" style="margin: 0 auto;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:600,width:600,id:function(e){return e.join("/status/")}},instagram:{regex:/(https?:\/\/(?:www\.)?instagram\.com\/p\/([^/?#&]+)).*/,embedUrl:"<%= remote_id %>",html:'<div style="width: 100%; height: 100px; background-color: #DB2E6E; text-align: center; color: #ffffff; padding-top: 40px">Instagram embedded.</div>',height:300,width:600}}}},table:{class:y.a,inlineToolbar:!0,config:{rows:2,cols:3}},paragraph:{class:w.a,inlineToolbar:!0},list:{class:x.a,inlineToolbar:!0},warning:{class:N.a,inlineToolbar:!0,shortcut:"CMD+SHIFT+W",config:{titlePlaceholder:"Title",messagePlaceholder:"Message"}},code:_.a,linkTool:{class:D.a,config:{endpoint:"".concat(Object(G.a)(),"/linkToolUrl")}},image:{class:F.a,config:{uploader:{uploadByFile:function(e){var t=new FormData;return t.append("file",e),m.a.post("".concat(Object(G.a)(),"/api/v1/upload"),t,{}).then((function(e){return console.log(e),e.data.success?{success:1,file:{url:"".concat(Object(G.a)(),"/file/").concat(e.data.file_name)}}:{success:0}})).catch((function(e){return console.log(e),console.log("Error while uploading image"),{success:0}}))}}}},header:I.a,quote:R.a,marker:J.a,checklist:z.a,delimiter:M.a,inlineCode:U.a,simpleImage:$.a},Q=a(26),V=function(){return"https://picsum.photos/id/".concat((e=0,t=1084,Math.round(Math.random()*(+t-+e)+ +e)),"/1000/400.jpg");var e,t};t.a=function(e){var t=Object(o.useRef)(null),a=Object(o.useContext)(f.a),n=(a.user_id,a.user_dp,a.user_fullname,a.user_username,Object(o.useState)(!1)),u=Object(l.a)(n,2),h=u[0],v=u[1],E=Object(o.useState)(null),y=Object(l.a)(E,2),j=y[0],w=y[1],O=Object(o.useState)(null),x=Object(l.a)(O,2),k=x[0],N=x[1],S=Object(o.useState)(""),_=Object(l.a)(S,2),C=_[0],D=_[1],A=Object(o.useState)(""),F=Object(l.a)(A,2),T=F[0],I=F[1],B=Object(o.useState)(""),R=Object(l.a)(B,2),W=R[0],J=R[1],P=Object(o.useState)(i.a.createElement(i.a.Fragment,null)),z=Object(l.a)(P,2),L=z[0],M=z[1],H=Object(o.useState)(!1),U=Object(l.a)(H,2),q=U[0],$=U[1],X=Object(o.useState)(""),Y=Object(l.a)(X,2),Z=Y[0],ee=Y[1],te=Object(o.useState)("NA"),ae=Object(l.a)(te,2),ne=ae[0],re=ae[1],ce=Object(o.useState)([]),le=Object(l.a)(ce,2),oe=le[0],ie=le[1],se=Object(o.useState)(),ue=Object(l.a)(se,2),me=ue[0],de=ue[1],be=Object(o.useState)(!0),ge=Object(l.a)(be,2),fe=ge[0],pe=ge[1],he=Object(o.useState)(0),ve=Object(l.a)(he,2),Ee=ve[0],ye=ve[1];function je(){v(!1)}function we(){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.current.save();case 2:(a=e.sent).blocks.length>0&&void 0!=a.blocks&&null!=a.blocks&&a.blocks[0].data&&a.blocks[0].data.text&&J(a.blocks[0].data.text),w(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(){pe(!0),re("NA"===ne?V():"NA")}return Object(o.useEffect)((function(){"edit"===e.mode?(N("Save"),D("updateArticleById"),e.articleData?(I(e.articleData.title?e.articleData.title:""),w(JSON.parse(e.articleData.content))):w({time:Date.now(),blocks:[],version:"2.17.0"})):(N("Publish"),D("createArticle"),w({time:Date.now(),blocks:[],version:"2.17.0"}),re("NA"))}),[]),Object(o.useEffect)((function(){if(e.articleData&&($(!0),ee(e.articleData.article_id),w(JSON.parse(e.articleData.content)),re(e.articleData.article_banner),e.articleData.tags)){var t=e.articleData.tags.map((function(e){return e.tag}));ie(t)}}),[e.articleData]),i.a.createElement(i.a.Fragment,null,L,i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-2"},i.a.createElement("button",{className:"btn btn-primary btn-lg mt-2 mb-2",onClick:function(){""==T.trim()||T.trim().length>120?e.notyf.error("Invalid article title"):j.blocks.length>0&&("paragraph"===j.blocks[0].type||"header"===j.blocks[0].type)?v(!0):e.notyf.error("Invalid article content")},type:"button"},k),i.a.createElement(d.a,{show:h,onHide:je},i.a.createElement(d.a.Header,{closeButton:!0},i.a.createElement(d.a.Title,null,k," Article")),i.a.createElement(d.a.Body,null,"Would you like to ",k," this article.",i.a.createElement("br",null)),i.a.createElement(d.a.Footer,null,i.a.createElement(b.a,{variant:"secondary",onClick:je},"Close"),i.a.createElement(b.a,{variant:"primary",onClick:function(){if(we(),""==T.trim()||T.trim().length>120)e.notyf.error("Invalid article title");else if(j.blocks.length>0){var t={};"edit"===e.mode&&(t.article_id=Z),"NA"!==ne&&(t.article_banner=ne),t.xAuthToken=e.auth_token,t.title=T,t.content=JSON.stringify(j),t.preview=W,t.tags=oe,console.log({_data_editor:t}),m.a.post("".concat(Object(G.a)(),"/api/v1/").concat(C),t).then((function(t){console.log(t),t.data.success&&("edit"===e.mode?e.notyf.success("Saved article"):e.notyf.success("Published article"),M(i.a.createElement(i.a.Fragment,null,i.a.createElement(g.a,{to:"/read/".concat(t.data.message.data.article_id)}))))})).catch((function(t){t?(console.log({resp:t.response.data}),null!==t.response.data.error.message?e.notyf.error("".concat(t.response.data.error.message)):e.notyf.error("Error occured")):e.notyf.error("Error occured")}))}else e.notyf.error("Invalid article content")}},k)))),i.a.createElement("div",{className:"col-md-8 custom-card2x"},i.a.createElement("div",{className:"w-100 mt-2"}),"NA"!==ne&&""!=ne&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"w-100 d-flex flex-row flex-wrap items-center"},i.a.createElement("div",{className:"".concat(fe?"preload":""," mr-md-2 d-inline-blockx"),style:{height:"120px",maxWidth:"100%",width:"300px",borderRadius:"4px"}},i.a.createElement("img",{src:ne,alt:"\xa0",onLoad:function(){pe(!1)},style:{height:"auto",width:"100%",borderRadius:"4px"}})),i.a.createElement(Q.a,{xs:!0,sm:!0},i.a.createElement("br",null)),i.a.createElement("div",{className:"mt-auto mb-auto"},i.a.createElement("button",{className:"btn btn-sm btn-outline-primary mr-2 d-inline-blockx",onClick:function(){pe(!0),re(V())},type:"button"},"Change"),i.a.createElement("button",{className:"btn btn-sm btn-outline-secondary mr-2 d-inline-blockx",onClick:function(){pe(!0),re(V())},type:"button"},"Randomize"),i.a.createElement("button",{className:"btn btn-sm btn-outline-danger mr-2 d-inline-blockx",onClick:xe,type:"button"},"Remove")))),("NA"===ne||""===ne)&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"w-100"},i.a.createElement("div",{className:"".concat(fe?"preload":""," mr-md-2"),style:{height:"120px",maxWidth:"100%",width:"300px",borderRadius:"4px",display:"grid",placeItems:"center"}},i.a.createElement("button",{className:"btn btn-outline-primary btn-sm",onClick:xe,type:"button"},"Add Banner")))),i.a.createElement("br",null),i.a.createElement("textarea",{type:"text",className:"form-control mt-2",value:T,onChange:function(e){e.target.value.length<120&&I(e.target.value)},style:{fontSize:"28px",fontWeight:"600",border:"unset",boxShadow:"unset",padding:"unset",background:"unset"},placeholder:"Title...",rows:"1"}),i.a.createElement("div",{className:"tags mb-2"},oe.map((function(t){var a=Object(p.a)(t),n=Object(p.b)(a,!0);return console.log({h:a,inv:n}),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"tag d-inline-block noselect mr-2",style:{backgroundColor:"#".concat(a),color:n,cursor:"pointer"},onClick:function(){return function(t){var a=oe.indexOf(t);if(-1!==a){var n=oe;n.splice(a,1),ie(n),we()}else e.notyf.error("Tag not found")}(t)}},"#",t))})),oe.length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"text-muted",style:{fontSize:"9px"}},"Click on the tags to remove them"))),oe.length<5&&i.a.createElement("input",{type:"text",className:"form-control",style:{border:"unset",boxShadow:"unset",padding:"unset",background:"unset"},placeholder:0==oe.length?"Add upto 5 tags...":oe.length>0&&oe.length<4?"Add ".concat(5-oe.length," more tags..."):"Add ".concat(5-oe.length," more tag..."),value:me,onFocus:function(){ye(1)},onBlur:function(){ye(0)},onChange:function(t){var a=t.target.value;if(" "===a[a.length-1]){if(oe.length<5)if(a.trim().length>=3&&a.trim().length<=20){var n=oe;-1===n.indexOf(a.trim().toLowerCase())?ie(n.concat(a.trim().toLowerCase())):e.notyf.open({type:"warn",message:"The tag has already been added."})}else e.notyf.error("Invalid tag");else e.notyf.error("Only upto 5 tags are allowed on a single article.");de("")}else de(a)}}),1===Ee&&oe.length<5&&i.a.createElement("div",{className:"text-muted",style:{fontSize:"9px"}},"Press space to add tags"),i.a.createElement("div",{className:"mt-2 mb-2"}),("edit"===e.mode&&q||"new"===e.mode)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a,{placeholder:"Write an awesome...",instanceRef:function(e){return t.current=e},onChange:we,tools:K,data:j}))),i.a.createElement("div",{className:"col-md-2"}))))}},235:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(192),l=a(24),o=a(59);t.default=function(e){console.log(e);var t=Object(n.useContext)(l.a),a=t.user_id,i=t.auth_token;return Object(n.useEffect)((function(){document.title="Create new article - Lattice"}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{user_id:a,auth_token:i,mode:"new",notyf:o.a}))}}}]);
//# sourceMappingURL=9.2329e67a.chunk.js.map