(this.webpackJsonpmajor_project_ui=this.webpackJsonpmajor_project_ui||[]).push([[15],{230:function(e,t,a){"use strict";a.r(t),a.d(t,"ProfileSettings",(function(){return N}));var n=a(6),l=a(0),c=a.n(l),r=a(94),o=(a(206),a(207)),s=a.n(o),i=a(178),m=a(30),u=a(44),d=a(208),h=a(231),p=a(28),E=a.n(p),g=a(29),b=a(212),f=a(23),v=a(57);var N=function(e){var t=Object(l.useContext)(f.a),a=(t.user_id,t.user_dp),r=t.user_fullname,o=t.user_username,u=t.user_bio,d=t.user_gender,h=t.auth_token,p=t.setAuth,b=Object(l.useState)({aspect:1,width:1024}),N=Object(n.a)(b,2),w=N[0],j=N[1],y=Object(l.useState)(!1),O=Object(n.a)(y,2),S=O[0],C=O[1],x=Object(l.useState)(null),k=Object(n.a)(x,2),_=k[0],I=k[1],F=Object(l.useState)(null),L=Object(n.a)(F,2),A=(L[0],L[1]),T=Object(l.useState)(null),U=Object(n.a)(T,2),P=U[0],B=U[1],z=Object(l.useState)(a),H=Object(n.a)(z,2),M=H[0],R=H[1],W=Object(l.useState)(r),D=Object(n.a)(W,2),J=D[0],K=D[1],Y=Object(l.useState)(u),q=Object(n.a)(Y,2),G=q[0],X=q[1],Q=Object(l.useState)(d),V=Object(n.a)(Q,2),Z=V[0],$=V[1],ee=Object(l.useCallback)((function(e){B(e);var t=e.width/1<1*e.height?100:1*e.height/e.width*100,a=e.width/1>1*e.height?100:e.width/1/e.height*100;return j({unit:"%",width:t,height:a,x:(100-t)/2,y:(100-a)/2,aspect:1}),!0}),[]);function te(e){"name"===e.target.name&&K(e.target.value),"bio"===e.target.name&&X(e.target.value),"gender"===e.target.name&&$(e.target.value)}function ae(e){var t=new FormData;return t.append("file",e),E.a.post("".concat(Object(g.a)(),"/api/v1/upload"),t,{}).then((function(e){var t;console.log(e),e.data.success?(t="".concat(Object(g.a)(),"/file/").concat(e.data.file_name),E.a.post("".concat(Object(g.a)(),"/api/v1/updateUserSettings"),{xAuthToken:h,profile_image_link:t}).then((function(e){console.log(e),e.data.success?(R(t),e.data.message.token=h,console.log({doc:e}),p(e.data),v.a.success("Successfully updated image")):v.a.error("Error occured while updating image")})).catch((function(e){console.log(e),console.log("Error while uploading image"),v.a.error("Error occured while updating image")}))):v.a.error("Error occured while updating image")})).catch((function(e){return console.log(e),console.log("Error while uploading image"),{success:0}}))}function ne(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.click(),e.addEventListener("change",(function(){e.files[0]?(A(e.files[0]),I(window.URL.createObjectURL(e.files[0])),C(!0)):v.a.error("Invalid file"),e.removeEventListener("change",(function(){}))}))}return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:e.className},c.a.createElement("h3",null,"Public Profile"),c.a.createElement("hr",{className:"light"}),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-4 text-center show-xs hide-md"},c.a.createElement("div",{className:"position-relative text-center"},c.a.createElement("img",{className:"avatar_image",alt:"img",name:"dp",src:M}),c.a.createElement(m.b,{title:"Menu",autoClose:!0,containerClassName:"drop-btnx position-absolute px-2 py-1 right-50 bottom-0 ml-2 mb-2",className:"profile-edit-btn btn-sm btn-info",containerStyle:{},menuStyle:{}},c.a.createElement(m.a,{onClick:ne},"Upload Image")))),c.a.createElement("div",{className:"col-md-8"},c.a.createElement("h6",null,"Name"),c.a.createElement("input",{type:"text",className:"form-control",name:"name",placeholder:"Full Name",value:J,onChange:te}),c.a.createElement("p",{className:"text-muted"},"Your name may appear around Lattice where you contribute or are mentioned."),c.a.createElement("br",null),c.a.createElement("h6",null,"Username"),c.a.createElement("input",{type:"text",className:"form-control",placeholder:"@username",value:o,disabled:!0}),c.a.createElement("p",{className:"text-muted"},"Your username may appear around Lattice where you contribute or are mentioned."),c.a.createElement("h6",null,"Bio"),c.a.createElement("textarea",{id:"",cols:"30",rows:"3",className:"form-control",name:"bio",placeholder:"Enter you Profile Bio",value:G,onChange:te}),c.a.createElement("hr",{className:"darker"}),c.a.createElement("h6",null,"Gender"),c.a.createElement("select",{className:"custom-select form-control",id:"ig-gender",name:"gender",onChange:te,value:Z},c.a.createElement("option",{defaultChecked:!0},"Choose..."),c.a.createElement("option",{value:"0"},"Male"),c.a.createElement("option",{value:"1"},"Female"),c.a.createElement("option",{value:"2"},"Others"),c.a.createElement("option",{value:"-1"},"Choose not to specify.")),c.a.createElement("button",{className:"btn btn-primary mt-2",onClick:function(){null===J||""===J||J.length>60?v.a.error("Invalid name"):null===Z||"Choose..."===Z?v.a.error("Invalid gender"):null===G||""===G||G.length>160?v.a.error("Invalid bio"):E.a.post("".concat(Object(g.a)(),"/api/v1/updateUserSettings"),{xAuthToken:h,fullname:J,user_bio:G,gender:Z}).then((function(e){console.log(e),e.data.success?(e.data.message.token=h,console.log({doc:e}),p(e.data),v.a.success("Successfully updated profile")):v.a.error("Error occured while updating profile information")})).catch((function(e){console.log(e),console.log("Error while updating information"),v.a.error("Error occured while updating profile information")}))}},"Save")),c.a.createElement("div",{className:"col-md-4 text-left pl-2 hide-xs show-md"},c.a.createElement("div",{className:"position-relative"},c.a.createElement("img",{className:"avatar_image",alt:"img",src:M}),c.a.createElement(m.b,{title:"Menu",autoClose:!0,containerClassName:"drop-btnx position-absolute px-2 py-1 left-0 bottom-0 ml-2 mb-2",className:"profile-edit-btn btn-sm btn-info",containerStyle:{},menuStyle:{transform:window.innerWidth<=576?"translateX(-80%)":null}},c.a.createElement(m.a,{onClick:ne},"Upload Image")))))),c.a.createElement(i.a,{show:S,onHide:function(){C(!1)}},c.a.createElement(i.a.Header,{closeButton:!0},c.a.createElement(i.a.Title,null,"Select Image")),c.a.createElement(i.a.Body,null,c.a.createElement(s.a,{circularCrop:!0,keepSelection:!0,onComplete:function(e,t){console.log(e,t)},src:_,crop:w,onChange:function(e){return j(e)},onImageLoaded:ee}),c.a.createElement("br",null)),c.a.createElement(i.a.Footer,null,c.a.createElement("button",{className:"btn btn-secondary",onClick:function(){C(!1)}},"Close"),c.a.createElement("button",{className:"btn btn-primary",onClick:function(){(function(e,t,a){var n=document.createElement("canvas"),l=e.naturalWidth/e.width,c=e.naturalHeight/e.height;return n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(e,t.x*l,t.y*c,t.width*l,t.height*c,0,0,t.width,t.height),new Promise((function(e,t){n.toBlob((function(t){t.name=a,e(t)}),"image/jpeg",1)}))})(P,w,"file-upload.jpeg").then((function(e){A(e),C(!1),ae(new File([e],"file-upload.jpeg"))}))}},"Select"))))},w=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:e.className},c.a.createElement("h3",null,"Account Settings"),c.a.createElement("hr",{className:"light"}),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-8"},"This is something"))))},j=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:e.className},c.a.createElement("h3",null,"Security Settings"),c.a.createElement("hr",{className:"light"}),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-8"},c.a.createElement("br",null),c.a.createElement("h5",null,"Change password"),c.a.createElement("hr",{className:"light"}),c.a.createElement("h6",null,"Old passworrd"),c.a.createElement("input",{type:"password",className:"form-control",placeholder:"Enter you current password"}),c.a.createElement("h6",{className:"mt-3"},"New password"),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6 mb-2"},c.a.createElement("input",{type:"password",className:"form-control",placeholder:"Enter new password"})),c.a.createElement("div",{className:"col-md-6"},c.a.createElement("input",{type:"password",className:"form-control",placeholder:"Repeat new password"}))),c.a.createElement("button",{className:"btn btn-primary mt-3",onClick:function(){console.log("saving new password")}},"Change password"),c.a.createElement("h5",{className:"mt-4 pt-3"},"Two-factor authentication"),c.a.createElement("hr",{className:"light"}),c.a.createElement("div",{className:"text-center"},c.a.createElement("span",{className:"mt-4 mb-2 pt-4 pb-2"},c.a.createElement(h.a,{className:"text-muted",style:{fontSize:"48px"}})),c.a.createElement("h5",null,"Two factor authentication is not enabled yet."),c.a.createElement("p",{className:"text-muted",style:{fontSize:"14px"}},"Two-factor authentication adds an additional layer of security to your account by requiring more than just a password to log in."),c.a.createElement("button",{className:"btn btn-success mt-4"},"Enable two-factor authentication"))))))};t.default=function(){var e=Object(l.useState)(1),t=Object(n.a)(e,2),a=t[0],o=t[1],s=Object(l.useState)(1),i=Object(n.a)(s,2),m=i[0],h=i[1],p=Object(l.useState)(0),E=Object(n.a)(p,2),g=E[0],f=E[1],v=screen.availWidth;return Object(l.useEffect)((function(){v<=767&&(f(1),h(0))}),[v]),c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,null,c.a.createElement("meta",{charSet:"utf-8"}),c.a.createElement("title",null,"Settings - Devorzo"),c.a.createElement("link",{rel:"canonical",href:"https://devorzo.github.io/settings"})),c.a.createElement("div",{className:"settings-section"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-3 mb-0 mt-3"},c.a.createElement("h2",{className:"noselect cursor-pointer",onClick:function(){v<=767&&h((m+1)%2)}},"Settings\xa0",function(e,t){return e?c.a.createElement("span",null,1===t?c.a.createElement(d.a,{icon:b.a,className:"toggle-icon"}):c.a.createElement(d.a,{icon:b.b,className:"toggle-icon"})):""}(g,m)),c.a.createElement("div",{className:0===m?"hide-sm hide-xs":""},c.a.createElement(r.a,{variant:"pills",defaultActiveKey:"link-1",className:"flex-column settings-nav"},c.a.createElement(r.a.Item,null,c.a.createElement(r.a.Link,{i:1,className:"nav-btn",onClick:function(e){o(1)},eventKey:"link-1"},"Profile Settings"))))),c.a.createElement("div",{className:"col-lg-9"},function(e){return 1===e?c.a.createElement(N,{className:"mt-4 pb-4"}):2===e?c.a.createElement(w,{className:"mt-4 pb-4"}):c.a.createElement(j,{className:"mt-4 pb-4"})}(a),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null))))))}}}]);
//# sourceMappingURL=15.2ecedadb.chunk.js.map