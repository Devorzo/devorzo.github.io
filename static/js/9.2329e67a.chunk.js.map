{"version":3,"sources":["lib/editorjs.dependencies.js","pages/editorjs.js","pages/newArticle.js"],"names":["EDITOR_JS_TOOLS","embed","class","Embed","inlineToolbar","config","services","youtube","coub","imgur","twitch","gfycat","yandex","codepen","vimeo","twitter","regex","embedUrl","html","height","width","id","ids","join","instagram","table","Table","rows","cols","paragraph","Paragraph","list","List","warning","Warning","shortcut","titlePlaceholder","messagePlaceholder","code","Code","linkTool","LinkTool","endpoint","getApiLink","image","Image","uploader","uploadByFile","file","f","FormData","append","Axios","post","then","doc","console","log","data","success","url","file_name","catch","e","header","Header","quote","Quote","marker","Marker","checklist","CheckList","delimiter","Delimiter","inlineCode","InlineCode","simpleImage","SimpleImage","getRandomBanner","min","max","Math","round","random","Editor","props","instanceRef","useRef","useContext","AuthContext","user_id","user_dp","user_fullname","user_username","useState","show","setShow","data_editor","setData","mode","setMode","api","setApi","title","setTitle","preview","setPreview","redir","setRedirect","ready","setReady","articleId","setArticleId","banner","setBanner","article_tags","setTags","tagsInput","setTagsInput","isImageLoading","setImageLoading","instructionFocused","setInstructionFocused","handleClose","handleSave","a","current","save","savedData","blocks","length","undefined","text","handleBannerClick","useEffect","articleData","JSON","parse","content","time","Date","now","version","article_id","article_banner","tags","t","map","i","tag","className","onClick","trim","notyf","error","type","Modal","onHide","closeButton","Title","Body","Footer","Button","variant","_data_editor","xAuthToken","auth_token","stringify","response","to","message","resp","style","maxWidth","borderRadius","src","alt","onLoad","xs","sm","display","placeItems","value","onChange","target","fontSize","fontWeight","border","boxShadow","padding","background","placeholder","h","hexStrColor","inv","invertColor","backgroundColor","color","cursor","val","indexOf","splice","handleTagRemoval","onFocus","onBlur","toLowerCase","concat","open","instance","tools","NewArticle","document"],"mappings":"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","file":"static/js/9.2329e67a.chunk.js","sourcesContent":["import Axios from 'axios';\nimport Embed from '@editorjs/embed';\nimport Table from '@editorjs/table';\nimport Paragraph from '@editorjs/paragraph';\nimport List from '@editorjs/list';\nimport Warning from '@editorjs/warning';\nimport Code from '@editorjs/code';\nimport LinkTool from '@editorjs/link';\nimport Image from '@editorjs/image';\n// import Raw from '@editorjs/raw'\nimport Header from '@editorjs/header';\nimport Quote from '@editorjs/quote';\nimport Marker from '@editorjs/marker';\nimport CheckList from '@editorjs/checklist';\nimport Delimiter from '@editorjs/delimiter';\nimport InlineCode from '@editorjs/inline-code';\nimport SimpleImage from '@editorjs/simple-image';\nimport { getApiLink } from './env.lib';\n\nexport const EDITOR_JS_TOOLS = {\n  embed: {\n    class: Embed,\n    inlineToolbar: true,\n    config: {\n      services: {\n        youtube: true,\n        coub: true,\n        imgur: true,\n        twitch: true,\n        gfycat: true,\n        yandex: true,\n        codepen: true,\n        vimeo: true,\n        // twitter:true,\n        twitter: {\n          regex: /^https?:\\/\\/twitter\\.com\\/(?:#!\\/)?(\\w+)\\/status(?:es)?\\/(\\d+)(?:\\/.*)?$/,\n          embedUrl:\n            'https://twitframe.com/show?url=https://twitter.com/<%= remote_id %>',\n          html:\n            '<iframe width=\"100%\" height=\"600\" style=\"margin: 0 auto;\" frameborder=\"0\" scrolling=\"no\" allowtransparency=\"true\"></iframe>',\n          height: 600,\n          width: 600,\n          id: (ids) => ids.join('/status/'),\n        },\n        instagram: {\n          regex: /(https?:\\/\\/(?:www\\.)?instagram\\.com\\/p\\/([^/?#&]+)).*/,\n          embedUrl: '<%= remote_id %>',\n          html:\n            '<div style=\"width: 100%; height: 100px; background-color: #DB2E6E; text-align: center; color: #ffffff; padding-top: 40px\">Instagram embedded.</div>',\n          height: 300,\n          width: 600,\n        },\n\n        // instagram: {\n        //     regex: /https?:\\/\\/www\\.instagram\\.com\\/p\\/([^\\/\\?\\&]+)\\/?/,\n        //     embedUrl: 'https://www.instagram.com/p/<%= remote_id %>/embed',\n        //     html: '<iframe width=\"400\" height=\"505\" style=\"margin: 0 auto;\" frameborder=\"0\" scrolling=\"no\" allowtransparency=\"true\"></iframe>',\n        //     height: 505,\n        //     width: 400\n        // },\n      },\n    },\n  },\n  table: {\n    class: Table,\n    inlineToolbar: true,\n    config: {\n      rows: 2,\n      cols: 3,\n    },\n  },\n  paragraph: {\n    class: Paragraph,\n    inlineToolbar: true,\n  },\n  list: {\n    class: List,\n    inlineToolbar: true,\n  },\n  warning: {\n    class: Warning,\n    inlineToolbar: true,\n    shortcut: 'CMD+SHIFT+W',\n    config: {\n      titlePlaceholder: 'Title',\n      messagePlaceholder: 'Message',\n    },\n  },\n  code: Code,\n  // linkTool: LinkTool,\n  linkTool: {\n    class: LinkTool,\n    config: {\n      endpoint: `${getApiLink()}/linkToolUrl`, // Your backend endpoint for url data fetching\n    },\n  },\n  // image: Image,\n  image: {\n    class: Image,\n    config: {\n      uploader: {\n        uploadByFile(file) {\n          const f = new FormData();\n          f.append('file', file);\n          return Axios.post(`${getApiLink()}/api/v1/upload`, f, {})\n            .then((doc) => {\n              console.log(doc);\n\n              if (doc.data.success) {\n                return {\n                  success: 1,\n                  file: {\n                    url: `${getApiLink()}/file/${doc.data.file_name}`,\n                  },\n                };\n              }\n              return {\n                success: 0,\n              };\n            })\n            .catch((e) => {\n              console.log(e);\n              console.log('Error while uploading image');\n              return {\n                success: 0,\n              };\n            });\n        },\n      },\n    },\n  },\n  header: Header,\n  quote: Quote,\n  marker: Marker,\n  checklist: CheckList,\n  delimiter: Delimiter,\n  inlineCode: InlineCode,\n  simpleImage: SimpleImage,\n};\n\nexport default {\n  EDITOR_JS_TOOLS,\n};\n","/* eslint-disable no-underscore-dangle */\r\n/* eslint-disable eqeqeq */\r\nimport React, { useContext, useRef, useState, useEffect } from 'react';\r\n\r\nimport EditorJs from 'react-editor-js';\r\nimport Axios from 'axios';\r\n\r\nimport { Button, Modal } from 'react-bootstrap';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { AuthContext } from '../contexts/auth_context';\r\nimport { hexStrColor, invertColor } from '../lib/colors.lib';\r\nimport { EDITOR_JS_TOOLS } from '../lib/editorjs.dependencies';\r\nimport { getApiLink } from '../lib/env.lib';\r\nimport Breakpoint from '../components/breakpoint/breakpoint';\r\n\r\nexport const randNum = (min, max) => {\r\n  const random = Math.round(Math.random() * (+max - +min) + +min);\r\n  return random;\r\n};\r\n\r\nexport const getRandomBanner = () => {\r\n  return `https://picsum.photos/id/${randNum(0, 1084)}/1000/400.jpg`;\r\n};\r\nconst Editor = (props) => {\r\n  // let key_i = 0;\r\n  const instanceRef = useRef(null);\r\n\r\n  const { user_id, user_dp, user_fullname, user_username } = useContext(\r\n    AuthContext,\r\n  );\r\n  const [show, setShow] = useState(false);\r\n  const [data_editor, setData] = useState(null);\r\n  const [mode, setMode] = useState(null);\r\n  const [api, setApi] = useState('');\r\n  const [title, setTitle] = useState('');\r\n  const [preview, setPreview] = useState('');\r\n  const [redir, setRedirect] = useState(<></>);\r\n  const [ready, setReady] = useState(false);\r\n  const [articleId, setArticleId] = useState('');\r\n  const [banner, setBanner] = useState('NA');\r\n  const [article_tags, setTags] = useState([]);\r\n  const [tagsInput, setTagsInput] = useState();\r\n  const [isImageLoading, setImageLoading] = useState(true);\r\n  const [instructionFocused, setInstructionFocused] = useState(0);\r\n  function handleTagsAddition(e) {\r\n    const val = e.target.value;\r\n    const lastChar = val[val.length - 1]; // take only the last character\r\n    if (lastChar === ' ') {\r\n      // check if the last character is a <space>\r\n\r\n      if (article_tags.length < 5) {\r\n        if (val.trim().length >= 3 && val.trim().length <= 20) {\r\n          const t = article_tags;\r\n          if (t.indexOf(val.trim().toLowerCase()) === -1) {\r\n            setTags(t.concat(val.trim().toLowerCase()));\r\n          } else {\r\n            props.notyf.open({\r\n              type: 'warn',\r\n              message: 'The tag has already been added.',\r\n            });\r\n          }\r\n        } else {\r\n          props.notyf.error('Invalid tag');\r\n        }\r\n      } else {\r\n        props.notyf.error('Only upto 5 tags are allowed on a single article.');\r\n      }\r\n      setTagsInput('');\r\n    } else {\r\n      setTagsInput(val);\r\n    }\r\n  }\r\n\r\n  function handleTagRemoval(val) {\r\n    const i = article_tags.indexOf(val);\r\n    if (i !== -1) {\r\n      const t = article_tags;\r\n      t.splice(i, 1);\r\n      setTags(t);\r\n      handleSave();\r\n    } else {\r\n      props.notyf.error('Tag not found');\r\n    }\r\n  }\r\n\r\n  function handleOpen() {\r\n    setShow(true);\r\n  }\r\n\r\n  function validatePublish() {\r\n    if (title.trim() == '' || title.trim().length > 120) {\r\n      props.notyf.error('Invalid article title');\r\n      return;\r\n    }\r\n\r\n    if (data_editor.blocks.length > 0) {\r\n      if (\r\n        data_editor.blocks[0].type === 'paragraph' ||\r\n        data_editor.blocks[0].type === 'header'\r\n      ) {\r\n        handleOpen();\r\n      } else {\r\n        props.notyf.error('Invalid article content');\r\n      }\r\n    } else {\r\n      props.notyf.error('Invalid article content');\r\n    }\r\n  }\r\n  function handleClose() {\r\n    setShow(false);\r\n  }\r\n  async function handleSave() {\r\n    const savedData = await instanceRef.current.save();\r\n    if (\r\n      savedData.blocks.length > 0 &&\r\n      savedData.blocks != undefined &&\r\n      savedData.blocks != null\r\n    ) {\r\n      // if (\r\n      //   savedData.blocks[0].type === 'paragraph' ||\r\n      //   savedData.blocks[0].type === 'header'\r\n      // )\r\n      if (savedData.blocks[0].data) {\r\n        if (savedData.blocks[0].data.text) {\r\n          setPreview(savedData.blocks[0].data.text);\r\n        }\r\n      }\r\n    }\r\n    setData(savedData);\r\n    // console.log('savedData', savedData);\r\n  }\r\n\r\n  function handleBtnClick() {\r\n    handleSave();\r\n    if (title.trim() == '' || title.trim().length > 120) {\r\n      props.notyf.error('Invalid article title');\r\n      return;\r\n    }\r\n\r\n    if (data_editor.blocks.length > 0) {\r\n      // if (\r\n      //   data_editor.blocks[0].type === 'paragraph' ||\r\n      //   data_editor.blocks[0].type === 'header'\r\n      // ) {\r\n      const _data_editor = {};\r\n      if (props.mode === 'edit') {\r\n        _data_editor.article_id = articleId;\r\n      }\r\n      // else if (props.mode === 'new') {\r\n      // }\r\n\r\n      if (banner !== 'NA') {\r\n        _data_editor.article_banner = banner;\r\n      }\r\n      _data_editor.xAuthToken = props.auth_token;\r\n      _data_editor.title = title;\r\n      _data_editor.content = JSON.stringify(data_editor);\r\n      _data_editor.preview = preview;\r\n      _data_editor.tags = article_tags;\r\n\r\n      console.log({ _data_editor });\r\n\r\n      Axios.post(`${getApiLink()}/api/v1/${api}`, _data_editor)\r\n        .then((response) => {\r\n          console.log(response);\r\n          if (response.data.success) {\r\n            if (props.mode === 'edit') {\r\n              props.notyf.success('Saved article');\r\n            } else {\r\n              props.notyf.success('Published article');\r\n            }\r\n            setRedirect(\r\n              <>\r\n                <Redirect\r\n                  to={(() =>\r\n                    `/read/${response.data.message.data.article_id}`)()}\r\n                />\r\n              </>,\r\n            );\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          if (e) {\r\n            console.log({ resp: e.response.data });\r\n            if (e.response.data.error.message !== null) {\r\n              props.notyf.error(`${e.response.data.error.message}`);\r\n            } else {\r\n              props.notyf.error('Error occured');\r\n            }\r\n          } else {\r\n            props.notyf.error('Error occured');\r\n          }\r\n        });\r\n      // } else {\r\n      //   props.notyf.error('Invalid article title');\r\n      // }\r\n    } else {\r\n      props.notyf.error('Invalid article content');\r\n    }\r\n  }\r\n\r\n  function handleBannerClick() {\r\n    setImageLoading(true);\r\n    if (banner === 'NA') {\r\n      setBanner(getRandomBanner());\r\n    } else {\r\n      setBanner('NA');\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (props.mode === 'edit') {\r\n      setMode('Save');\r\n      setApi('updateArticleById');\r\n      if (props.articleData) {\r\n        setTitle(props.articleData.title ? props.articleData.title : '');\r\n        setData(JSON.parse(props.articleData.content));\r\n      } else {\r\n        setData({ time: Date.now(), blocks: [], version: '2.17.0' });\r\n      }\r\n    } else {\r\n      setMode('Publish');\r\n      setApi('createArticle');\r\n      setData({ time: Date.now(), blocks: [], version: '2.17.0' });\r\n      setBanner('NA');\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (props.articleData) {\r\n      setReady(true);\r\n      setArticleId(props.articleData.article_id);\r\n      setData(JSON.parse(props.articleData.content));\r\n      setBanner(props.articleData.article_banner);\r\n\r\n      if (props.articleData.tags) {\r\n        const t = props.articleData.tags.map((i) => i.tag);\r\n        setTags(t);\r\n      }\r\n    }\r\n  }, [props.articleData]);\r\n\r\n  return (\r\n    <>\r\n      {/* <br /> */}\r\n      {redir}\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-2\">\r\n            {/* <hr className=\"light\"/> */}\r\n            <button\r\n              className=\"btn btn-primary btn-lg mt-2 mb-2\"\r\n              onClick={validatePublish}\r\n              type=\"button\"\r\n            >\r\n              {mode}\r\n            </button>\r\n            <Modal\r\n              show={show}\r\n              onHide={handleClose}\r\n              // size=\"lg\"\r\n              // dialogClassName=\"modal-90w\"\r\n            >\r\n              <Modal.Header closeButton>\r\n                <Modal.Title>{mode} Article</Modal.Title>\r\n              </Modal.Header>\r\n              <Modal.Body>\r\n                Would you like to {mode} this article.\r\n                <br />\r\n              </Modal.Body>\r\n              <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={handleClose}>\r\n                  Close\r\n                </Button>\r\n                <Button variant=\"primary\" onClick={handleBtnClick}>\r\n                  {mode}\r\n                </Button>\r\n              </Modal.Footer>\r\n            </Modal>\r\n          </div>\r\n\r\n          <div className=\"col-md-8 custom-card2x\">\r\n            <div className=\"w-100 mt-2\" />\r\n\r\n            {banner !== 'NA' && banner != '' && (\r\n              <>\r\n                <div className=\"w-100 d-flex flex-row flex-wrap items-center\">\r\n                  <div\r\n                    className={`${\r\n                      isImageLoading ? 'preload' : ''\r\n                    } mr-md-2 d-inline-blockx`}\r\n                    style={{\r\n                      height: '120px',\r\n                      maxWidth: '100%',\r\n                      width: '300px',\r\n                      borderRadius: '4px',\r\n                    }}\r\n                  >\r\n                    <img\r\n                      src={banner}\r\n                      alt=\"&nbsp;\"\r\n                      onLoad={() => {\r\n                        setImageLoading(false);\r\n                      }}\r\n                      style={{\r\n                        height: 'auto',\r\n                        width: '100%',\r\n                        borderRadius: '4px',\r\n                      }}\r\n                    />\r\n                  </div>\r\n\r\n                  <Breakpoint xs sm>\r\n                    <br />\r\n                  </Breakpoint>\r\n                  <div className=\"mt-auto mb-auto\">\r\n                    <button\r\n                      className=\"btn btn-sm btn-outline-primary mr-2 d-inline-blockx\"\r\n                      onClick={() => {\r\n                        setImageLoading(true);\r\n                        setBanner(getRandomBanner());\r\n                      }}\r\n                      type=\"button\"\r\n                    >\r\n                      Change\r\n                    </button>\r\n\r\n                    <button\r\n                      className=\"btn btn-sm btn-outline-secondary mr-2 d-inline-blockx\"\r\n                      onClick={() => {\r\n                        setImageLoading(true);\r\n                        setBanner(getRandomBanner());\r\n                      }}\r\n                      type=\"button\"\r\n                    >\r\n                      Randomize\r\n                    </button>\r\n\r\n                    <button\r\n                      className=\"btn btn-sm btn-outline-danger mr-2 d-inline-blockx\"\r\n                      onClick={handleBannerClick}\r\n                      type=\"button\"\r\n                    >\r\n                      Remove\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {(banner === 'NA' || banner === '') && (\r\n              <>\r\n                <div className=\"w-100\">\r\n                  <div\r\n                    className={`${isImageLoading ? 'preload' : ''} mr-md-2`}\r\n                    style={{\r\n                      height: '120px',\r\n                      maxWidth: '100%',\r\n                      width: '300px',\r\n                      borderRadius: '4px',\r\n                      display: 'grid',\r\n                      placeItems: 'center',\r\n                    }}\r\n                  >\r\n                    <button\r\n                      className=\"btn btn-outline-primary btn-sm\"\r\n                      onClick={handleBannerClick}\r\n                      type=\"button\"\r\n                    >\r\n                      Add Banner\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            <br />\r\n\r\n            <textarea\r\n              type=\"text\"\r\n              className=\"form-control mt-2\"\r\n              value={title}\r\n              onChange={(e) => {\r\n                if (e.target.value.length < 120) setTitle(e.target.value);\r\n              }}\r\n              style={{\r\n                fontSize: '28px',\r\n                fontWeight: '600',\r\n                border: 'unset',\r\n                boxShadow: 'unset',\r\n                padding: 'unset',\r\n                background: 'unset',\r\n                // color: '#000',\r\n                // height: '47px',\r\n              }}\r\n              placeholder=\"Title...\"\r\n              rows=\"1\"\r\n            />\r\n            <div className=\"tags mb-2\">\r\n              {article_tags.map((i) => {\r\n                const h = hexStrColor(i);\r\n                const inv = invertColor(h, true);\r\n\r\n                console.log({ h, inv });\r\n                return (\r\n                  <>\r\n                    <div\r\n                      className=\"tag d-inline-block noselect mr-2\"\r\n                      style={{\r\n                        backgroundColor: `#${h}`,\r\n                        color: inv,\r\n                        cursor: 'pointer',\r\n                      }}\r\n                      onClick={() => handleTagRemoval(i)}\r\n                    >\r\n                      #{i}\r\n                    </div>\r\n                  </>\r\n                );\r\n              })}\r\n\r\n              {article_tags.length > 0 && (\r\n                <>\r\n                  <div className=\"text-muted\" style={{ fontSize: '9px' }}>\r\n                    Click on the tags to remove them\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            {article_tags.length < 5 && (\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                style={{\r\n                  // fontSize: '12px',\r\n                  border: 'unset',\r\n                  boxShadow: 'unset',\r\n                  padding: 'unset',\r\n                  background: 'unset',\r\n                }}\r\n                placeholder={(() => {\r\n                  if (article_tags.length == 0) {\r\n                    return 'Add upto 5 tags...';\r\n                  }\r\n                  if (article_tags.length > 0 && article_tags.length < 4) {\r\n                    return `Add ${5 - article_tags.length} more tags...`;\r\n                  }\r\n                  return `Add ${5 - article_tags.length} more tag...`;\r\n                })()}\r\n                value={tagsInput}\r\n                onFocus={() => {\r\n                  setInstructionFocused(1);\r\n                }}\r\n                onBlur={() => {\r\n                  setInstructionFocused(0);\r\n                }}\r\n                onChange={handleTagsAddition}\r\n              />\r\n            )}\r\n            {instructionFocused === 1 && article_tags.length < 5 && (\r\n              <div className=\"text-muted\" style={{ fontSize: '9px' }}>\r\n                Press space to add tags\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"mt-2 mb-2\" />\r\n\r\n            {((props.mode === 'edit' && ready) || props.mode === 'new') && (\r\n              <>\r\n                <EditorJs\r\n                  placeholder=\"Write an awesome...\"\r\n                  // eslint-disable-next-line no-return-assign\r\n                  instanceRef={(instance) => (instanceRef.current = instance)}\r\n                  onChange={handleSave}\r\n                  tools={EDITOR_JS_TOOLS}\r\n                  data={data_editor}\r\n                />\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"col-md-2\" />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Editor;\r\n","import React, { useContext, useEffect } from 'react';\nimport Editor from './editorjs';\nimport { AuthContext } from '../contexts/auth_context';\nimport notyf from '../lib/notification';\n\nconst NewArticle = (props) => {\n  console.log(props);\n  const { user_id, auth_token } = useContext(AuthContext);\n  useEffect(() => {\n    document.title = 'Create new article - Lattice';\n  }, []);\n\n  return (\n    <>\n      <Editor\n        user_id={user_id}\n        auth_token={auth_token}\n        mode=\"new\"\n        notyf={notyf}\n      />\n    </>\n  );\n};\n\nexport default NewArticle;\n"],"sourceRoot":""}